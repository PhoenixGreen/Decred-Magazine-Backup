const adminUrl=window.location.href.replace("auth-frame/","");window.addEventListener("message",(async function(n){n.origin;let t=null;try{t=JSON.parse(n.data)}catch(n){console.error(n)}function a(a,i){n.source.postMessage(JSON.stringify({uid:t.uid,error:a,result:i}),"*")}if("getUser"===t.action)try{const n=await fetch(adminUrl+"api/canary/admin/users/me/");a(null,await n.json())}catch(n){a(n,null)}if("hideComment"===t.action)try{const n=await fetch(adminUrl+"api/canary/admin/comments/"+t.id+"/",{method:"PUT",body:JSON.stringify({comments:[{id:t.id,status:"hidden"}]}),headers:{"Content-Type":"application/json"}});a(null,await n.json())}catch(n){a(n,null)}if("showComment"===t.action)try{const n=await fetch(adminUrl+"api/canary/admin/comments/"+t.id+"/",{method:"PUT",body:JSON.stringify({comments:[{id:t.id,status:"published"}]}),headers:{"Content-Type":"application/json"}});a(null,await n.json())}catch(n){a(n,null)}}));